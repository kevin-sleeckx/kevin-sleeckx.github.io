<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overuren Logger</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#7dd3fc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Overuren Logger">
    <meta name="description" content="Professionele overuren bijhouden met kalender weergave en PDF export">
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="style-minimalist.css">
    
    <!-- PDF Libraries -->
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@latest/dist/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>â° Overuren Logger</h1>
            <p>Houd uw overuren bij met mooie kalender weergave</p>
            <button id="installBtn" class="install-button" style="display: none;">
                ğŸ“± App Installeren
            </button>
        </div>

        <div class="backup-reminder" id="backupReminder">
            <strong>âš ï¸ Wekelijkse Backup Herinnering:</strong> Vergeet niet om uw gegevens deze week naar PDF te exporteren! 
            <button class="button" onclick="exportToPDF()" style="margin-left: 15px;">Nu Exporteren</button>
        </div>

        <div class="total-display">
            <div>Totaal Saldo: â‚¬<span id="totalAmount">0,00</span></div>
        </div>

        <!-- Configuratie -->
        <div class="section">
            <h2>ğŸ’° Configuratie</h2>
            
            <!-- Start Bedrag -->
            <div class="form-group">
                <label for="startingAmount">Start Bedrag (â‚¬)</label>
                <input type="number" id="startingAmount" step="0.01" placeholder="Voer uw start overuren saldo in">
                <small class="small-text mt-1">
                    Het bedrag dat u had voordat u deze app begon te gebruiken
                </small>
            </div>
            <button class="button" onclick="saveStartingAmount()">Start Bedrag Opslaan</button>
            <div id="startingDisplay" class="wage-display" style="display: none;">
                <strong>Start Bedrag: â‚¬<span id="currentStarting">0,00</span></strong>
            </div>

            <!-- Dagloon (Standaard verborgen) -->
            <div style="margin-top: 25px;">
                <button class="button" onclick="toggleDailyWage()" id="toggleWageBtn">âš™ï¸ Dagloon Configureren</button>
                <div id="dailyWageSection" style="display: none; margin-top: 15px;">
                    <div class="form-group">
                        <label for="dailyWage">Dagloon (â‚¬)</label>
                        <input type="number" id="dailyWage" step="0.01" placeholder="Voer uw dagloon in">
                        <small class="small-text mt-1">
                            PrivÃ© - alleen gebruikt voor berekeningen, niet gedeeld in exports
                        </small>
                    </div>
                    <button class="button" onclick="saveDailyWage()">Dagloon Opslaan</button>
                    <div id="wageDisplay" class="wage-display" style="display: none;">
                        <strong>Huidig Dagloon: â‚¬<span id="currentWage">0,00</span></strong>
                        <div style="margin-top: 5px; color: #6b7280;">
                            Uurloon: â‚¬<span id="hourlyRate">0,00</span> (gebaseerd op 7,25 uur)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabbed Logging Interface -->
        <div class="section">
            <div class="tabs-container">
                <div class="tab-navigation">
                    <button class="tab-button tab-add active" onclick="switchTab('add')">â•</button>
                    <button class="tab-button tab-take" onclick="switchTab('take')">â–</button>
                    <button class="tab-button tab-order" onclick="switchTab('order')">ğŸ›’</button>
                </div>

                <!-- Add Overtime Tab -->
                <div id="addTab" class="tab-content active">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="overtimeDate">Datum</label>
                            <input type="date" id="overtimeDate">
                        </div>
                        <div class="form-group">
                            <label for="shiftType">Dienst Type</label>
                            <select id="shiftType" onchange="updateEarnPreview()">
                                <option value="dag">Dag Dienst (+50%)</option>
                                <option value="vroege">Vroege Dienst (+55%)</option>
                                <option value="late">Late Dienst (+65%)</option>
                                <option value="nacht">Nacht Dienst (+100%)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="overtimeHours">Overuren</label>
                        <select id="overtimeHours" onchange="updateEarnPreview()">
                            <option value="0">Selecteer overuren</option>
                            <option value="0.25">15 minuten</option>
                            <option value="0.5">30 minuten</option>
                            <option value="0.75">45 minuten</option>
                            <option value="1">1 uur</option>
                            <option value="1.25">1 uur 15 minuten</option>
                            <option value="1.5">1 uur 30 minuten</option>
                            <option value="1.75">1 uur 45 minuten</option>
                            <option value="2">2 uur</option>
                            <option value="2.25">2 uur 15 minuten</option>
                            <option value="2.5">2 uur 30 minuten</option>
                            <option value="2.75">2 uur 45 minuten</option>
                            <option value="3">3 uur</option>
                            <option value="3.25">3 uur 15 minuten</option>
                            <option value="3.5">3 uur 30 minuten</option>
                            <option value="3.75">3 uur 45 minuten</option>
                            <option value="4">4 uur</option>
                            <option value="4.25">4 uur 15 minuten</option>
                            <option value="4.5">4 uur 30 minuten</option>
                            <option value="4.75">4 uur 45 minuten</option>
                            <option value="5">5 uur</option>
                            <option value="5.5">5 uur 30 minuten</option>
                            <option value="6">6 uur</option>
                            <option value="6.5">6 uur 30 minuten</option>
                            <option value="7">7 uur</option>
                            <option value="8">8 uur</option>
                            <option value="9">9 uur</option>
                            <option value="10">10 uur</option>
                            <option value="custom">Aangepast (handmatig invoeren)</option>
                        </select>
                    </div>
                    <div id="customOvertimeHours" class="form-group" style="display: none;">
                        <label for="customHoursInput">Aangepaste Uren (in decimaal formaat, bijv. 2,5 voor 2u 30min)</label>
                        <input type="number" id="customHoursInput" step="0.25" min="0" max="24" placeholder="Voer uren in" onchange="updateEarnPreview()">
                    </div>
                    <div id="earnPreview" class="calculation-preview" style="display: none;">
                        <h4>ğŸ’¡ Berekening Voorvertoning</h4>
                        <div class="calculation-steps" id="earnCalculation"></div>
                    </div>
                    <button class="button" onclick="addOvertime()">Overuren Toevoegen</button>
                </div>

                <!-- Take Overtime Tab -->
                <div id="takeTab" class="tab-content">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="takeDate">Datum</label>
                            <input type="date" id="takeDate">
                        </div>
                        <div class="form-group">
                            <label for="takeShiftType">Dienst Type</label>
                            <select id="takeShiftType" onchange="updateTakePreview()">
                                <option value="dag">Dag Dienst (Basis Tarief)</option>
                                <option value="vroege">Vroege Dienst (+5% aftrek)</option>
                                <option value="late">Late Dienst (+15% aftrek)</option>
                                <option value="nacht">Nacht Dienst (+50% aftrek)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="takeHours">Uren Om Op Te Nemen</label>
                        <select id="takeHours" onchange="updateTakePreview()">
                            <option value="0">Selecteer uren om op te nemen</option>
                            <option value="0.25">15 minuten</option>
                            <option value="0.5">30 minuten</option>
                            <option value="0.75">45 minuten</option>
                            <option value="1">1 uur</option>
                            <option value="1.25">1 uur 15 minuten</option>
                            <option value="1.5">1 uur 30 minuten</option>
                            <option value="1.75">1 uur 45 minuten</option>
                            <option value="2">2 uur</option>
                            <option value="2.25">2 uur 15 minuten</option>
                            <option value="2.5">2 uur 30 minuten</option>
                            <option value="2.75">2 uur 45 minuten</option>
                            <option value="3">3 uur</option>
                            <option value="3.25">3 uur 15 minuten</option>
                            <option value="3.5">3 uur 30 minuten</option>
                            <option value="3.75">3 uur 45 minuten</option>
                            <option value="4">4 uur</option>
                            <option value="4.25">4 uur 15 minuten</option>
                            <option value="4.5">4 uur 30 minuten</option>
                            <option value="4.75">4 uur 45 minuten</option>
                            <option value="5">5 uur</option>
                            <option value="5.5">5 uur 30 minuten</option>
                            <option value="6">6 uur</option>
                            <option value="6.5">6 uur 30 minuten</option>
                            <option value="7">7 uur</option>
                            <option value="8">8 uur</option>
                            <option value="9">9 uur</option>
                            <option value="10">10 uur</option>
                            <option value="custom">Aangepast (handmatig invoeren)</option>
                        </select>
                    </div>
                    <div id="customTakeHours" class="form-group" style="display: none;">
                        <label for="customTakeInput">Aangepaste Uren (in decimaal formaat, bijv. 2,5 voor 2u 30min)</label>
                        <input type="number" id="customTakeInput" step="0.25" min="0" max="24" placeholder="Voer uren in" onchange="updateTakePreview()">
                    </div>
                    <div id="takePreview" class="calculation-preview" style="display: none;">
                        <h4>ğŸ’¡ Berekening Voorvertoning</h4>
                        <div class="calculation-steps" id="takeCalculation"></div>
                    </div>
                    <button class="button danger" onclick="takeOvertime()">Overuren Opnemen</button>
                </div>

                <!-- Order Tab -->
                <div id="orderTab" class="tab-content">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="orderDate">Datum</label>
                            <input type="date" id="orderDate">
                        </div>
                        <div class="form-group">
                            <label for="orderAmount">Bedrag (â‚¬)</label>
                            <input type="number" id="orderAmount" step="0.01" placeholder="Voer bedrag in">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="orderDescription">Beschrijving (Optioneel)</label>
                        <input type="text" id="orderDescription" placeholder="Wat heeft u besteld?">
                    </div>
                    <button class="button danger" onclick="addOrder()">Bestelling Toevoegen</button>
                </div>
            </div>
        </div>

        <!-- Kalender Weergave -->
        <div class="section">
            <h2>ğŸ“… Maandelijks Kalender Overzicht</h2>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button class="calendar-nav" onclick="changeMonth(-1)">â€¹</button>
                    <h3 class="calendar-title" id="calendarTitle"></h3>
                    <button class="calendar-nav" onclick="changeMonth(1)">â€º</button>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
            <p class="small-text mt-2">
                ğŸ’¡ <strong>Groene dagen</strong> = inkomsten, <strong>Rode dagen</strong> = aftrekkingen. Klik op een dag om details te bekijken.
            </p>
        </div>

        <!-- Export Sectie -->
        <div class="section">
            <h2>ğŸ“„ Export & Backup</h2>
            <button class="button" onclick="toggleExportSection()" id="toggleExportBtn">ğŸ“Š Export & Backup Opties</button>
            <div id="exportSection" style="display: none; margin-top: 20px;">
                <div class="export-section">
                    <button class="button success" onclick="exportToPDF()">ğŸ“„ Exporteren naar PDF</button>
                    <button class="button" onclick="exportToText()">ğŸ“ Exporteren naar Tekst</button>
                    <button class="button success" onclick="exportOrdersToPDF()">ğŸ›’ Bestellingen naar PDF</button>
                    <button class="button" onclick="exportOrdersToText()">ğŸ›’ Bestellingen naar Tekst</button>
                    <button class="button danger" onclick="clearAllData()">ğŸ—‘ï¸ Alle Gegevens Wissen</button>
                </div>
                <p class="small-text mt-2">
                    ğŸ’¡ <strong>Tip:</strong> Exporteer uw gegevens wekelijks om verlies te voorkomen en professionele rapporten voor HR te maken.
                </p>
            </div>
        </div>

        <!-- Gegevens Overdracht Sectie -->
        <div class="section">
            <h2>ğŸ“± Gegevens Overdragen Tussen Apparaten</h2>
            <button class="button" onclick="toggleTransferSection()" id="toggleTransferBtn">ğŸ”„ Gegevens Overdracht Opties</button>
            <div id="transferSection" style="display: none; margin-top: 20px;">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #475569;">
                        Gegevens Exporteren (Kopieer deze tekst om over te dragen naar een ander apparaat):
                    </label>
                    <textarea id="exportDataText" readonly 
                        style="width: 100%; height: 120px; padding: 12px; border: 2px solid #e2e8f0; border-radius: 12px; font-family: 'Courier New', monospace; font-size: 12px; background: #f8fafc; resize: vertical;"></textarea>
                    <div style="margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="button" onclick="generateExportData()">ğŸ”„ Export Gegevens Genereren</button>
                        <button class="button" onclick="copyToClipboard()">ğŸ“‹ KopiÃ«ren naar Klembord</button>
                    </div>
                </div>
                
                <div>
                    <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #475569;">
                        Gegevens Importeren (Plak gegevens van een ander apparaat):
                    </label>
                    <textarea id="importDataText" placeholder="Plak uw geÃ«xporteerde gegevens hier..." 
                        style="width: 100%; height: 80px; padding: 12px; border: 2px solid #e2e8f0; border-radius: 12px; font-family: 'Courier New', monospace; font-size: 12px; resize: vertical;"></textarea>
                    <div style="margin-top: 10px;">
                        <button class="button danger" onclick="importData()">ğŸ“¥ Gegevens Importeren (Dit vervangt alle huidige gegevens)</button>
                    </div>
                </div>
                
                <p class="small-text mt-2">
                    ğŸ’¡ <strong>Hoe over te dragen:</strong> 1) Genereer export gegevens 2) Kopieer de tekst 3) Op nieuw apparaat, plak tekst en importeer 4) Alle uw gegevens zijn overgedragen!
                </p>
            </div>
        </div>
    </div>

    <!-- Dagelijkse Detail Modal -->
    <div id="dailyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeDailyModal()">&times;</span>
                <h2 id="modalDate">Dagelijkse Transacties</h2>
            </div>
            <div class="modal-body">
                <div id="dailyTransactions">
                    <p class="text-center small-text">Geen transacties voor deze dag.</p>
                </div>
                <div class="text-center mt-3">
                    <strong>Dag Totaal: â‚¬<span id="dayTotal">0,00</span></strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Naam Invoer Modal voor PDF Export -->
    <div id="nameModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeNameModal()">&times;</span>
                <h2>Voer Uw Naam In Voor PDF Rapport</h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="employeeName">Uw Volledige Naam</label>
                    <input type="text" id="employeeName" placeholder="Voer uw volledige naam in voor het PDF rapport">
                    <small class="small-text mt-1">
                        Dit verschijnt bovenaan het PDF rapport voor HR identificatie
                    </small>
                </div>
                <div class="export-section mt-3">
                    <button class="button success" onclick="generatePDFWithName()">ğŸ“„ PDF Genereren</button>
                    <button class="button danger" onclick="closeNameModal()">Annuleren</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
